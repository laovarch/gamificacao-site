<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Teste do Editor</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .test-section { margin: 20px 0; padding: 15px; border: 1px solid #ccc; }
        button { padding: 10px 20px; margin: 5px; cursor: pointer; }
        .result { margin-top: 10px; padding: 10px; background: #f0f0f0; }
    </style>
</head>
<body>
    <h1>üß™ Teste do Editor de Configura√ß√µes</h1>
    
    <div class="test-section">
        <h3>Teste 1: Templates</h3>
        <button onclick="testTemplates()">Testar Templates</button>
        <div id="template-result" class="result"></div>
    </div>
    
    <div class="test-section">
        <h3>Teste 2: Cria√ß√£o de M√≥dulo</h3>
        <button onclick="testModuleCreation()">Testar Cria√ß√£o de M√≥dulo</button>
        <div id="module-result" class="result"></div>
    </div>
    
    <div class="test-section">
        <h3>Teste 3: Editor Visual</h3>
        <div id="test-editor" style="width: 300px; height: 200px; border: 1px solid #333; position: relative; background: #f5f5f5;"></div>
        <button onclick="testVisualEditor()">Testar Editor Visual</button>
        <div id="visual-result" class="result"></div>
    </div>

    <script>
        // Copiando as estruturas do editor principal para teste
        const templates = {
            empty: {
                title: "Nova Configura√ß√£o",
                modules: {},
                connections: []
            },
            
            simple: {
                title: "Configura√ß√£o Simples",
                modules: {
                    "centro": {
                        title: "üéØ Centro",
                        description: "Ponto central",
                        content: "Este √© o centro do aprendizado.",
                        type: "checkpoint",
                        position: { x: 50, y: 50 },
                        isAvailable: true,
                        isCompleted: false
                    },
                    "modulo1": {
                        title: "üìö M√≥dulo 1",
                        description: "Primeiro m√≥dulo",
                        content: "Conte√∫do do primeiro m√≥dulo.",
                        type: "content",
                        position: { x: 30, y: 30 },
                        isAvailable: true,
                        isCompleted: false,
                        dependencies: ["centro"]
                    }
                },
                connections: [
                    { from: "centro", to: "modulo1" }
                ]
            }
        };

        let currentConfig = null;

        function testTemplates() {
            const result = document.getElementById('template-result');
            result.innerHTML = '';
            
            try {
                // Testa template vazio
                currentConfig = JSON.parse(JSON.stringify(templates.empty));
                result.innerHTML += `<strong>‚úÖ Template Empty:</strong> ${currentConfig.title}<br>`;
                
                // Testa template simples
                currentConfig = JSON.parse(JSON.stringify(templates.simple));
                result.innerHTML += `<strong>‚úÖ Template Simple:</strong> ${currentConfig.title}<br>`;
                result.innerHTML += `<strong>M√≥dulos:</strong> ${Object.keys(currentConfig.modules).length}<br>`;
                result.innerHTML += `<strong>Conex√µes:</strong> ${currentConfig.connections.length}<br>`;
                
                result.innerHTML += '<br><strong>üéâ Templates funcionando corretamente!</strong>';
            } catch (error) {
                result.innerHTML = `<strong>‚ùå Erro:</strong> ${error.message}`;
            }
        }

        function testModuleCreation() {
            const result = document.getElementById('module-result');
            result.innerHTML = '';
            
            try {
                // Inicia com template vazio
                currentConfig = JSON.parse(JSON.stringify(templates.empty));
                
                // Cria um novo m√≥dulo
                const moduleId = 'teste1';
                const newModule = {
                    title: 'üìö M√≥dulo Teste',
                    description: 'M√≥dulo criado para teste',
                    content: 'Conte√∫do de teste.',
                    type: 'content',
                    position: { x: 40, y: 60 },
                    isAvailable: true,
                    isCompleted: false,
                    dependencies: []
                };
                
                currentConfig.modules[moduleId] = newModule;
                
                result.innerHTML += `<strong>‚úÖ M√≥dulo criado:</strong> ${newModule.title}<br>`;
                result.innerHTML += `<strong>Tipo:</strong> ${newModule.type}<br>`;
                result.innerHTML += `<strong>Posi√ß√£o:</strong> x=${newModule.position.x}%, y=${newModule.position.y}%<br>`;
                result.innerHTML += `<strong>Total de m√≥dulos:</strong> ${Object.keys(currentConfig.modules).length}<br>`;
                
                result.innerHTML += '<br><strong>üéâ Cria√ß√£o de m√≥dulo funcionando!</strong>';
            } catch (error) {
                result.innerHTML = `<strong>‚ùå Erro:</strong> ${error.message}`;
            }
        }

        function testVisualEditor() {
            const result = document.getElementById('visual-result');
            const editor = document.getElementById('test-editor');
            result.innerHTML = '';
            editor.innerHTML = '';
            
            try {
                // Usa template simples
                currentConfig = JSON.parse(JSON.stringify(templates.simple));
                
                // Cria m√≥dulos visuais
                Object.entries(currentConfig.modules).forEach(([id, module]) => {
                    const element = document.createElement('div');
                    element.style.cssText = `
                        position: absolute;
                        left: ${module.position.x}%;
                        top: ${module.position.y}%;
                        transform: translate(-50%, -50%);
                        width: 40px;
                        height: 40px;
                        border-radius: 50%;
                        background: ${module.type === 'checkpoint' ? '#17a2b8' : '#28a745'};
                        color: white;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        font-size: 16px;
                        cursor: pointer;
                    `;
                    element.textContent = module.type === 'checkpoint' ? 'üéØ' : 'üìö';
                    element.title = module.title;
                    
                    editor.appendChild(element);
                });
                
                result.innerHTML += `<strong>‚úÖ Editor visual funcionando!</strong><br>`;
                result.innerHTML += `<strong>M√≥dulos renderizados:</strong> ${Object.keys(currentConfig.modules).length}<br>`;
                result.innerHTML += '<strong>üéâ Visualiza√ß√£o criada com sucesso!</strong>';
                
            } catch (error) {
                result.innerHTML = `<strong>‚ùå Erro:</strong> ${error.message}`;
                console.error('Erro no teste visual:', error);
            }
        }

        // Auto-teste na inicializa√ß√£o
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üß™ P√°gina de teste carregada');
            testTemplates();
        });
    </script>
</body>
</html>
