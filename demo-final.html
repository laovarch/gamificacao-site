<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Demo Gamifica√ß√£o - Seletor de Configura√ß√µes</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            padding: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            color: white;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .config-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .config-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .config-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0,0,0,0.2);
        }

        .config-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #667eea, #764ba2);
        }

        .config-title {
            font-size: 1.3rem;
            font-weight: bold;
            margin-bottom: 10px;
            color: #333;
        }

        .config-description {
            color: #666;
            margin-bottom: 15px;
            line-height: 1.5;
        }

        .config-features {
            list-style: none;
            margin-bottom: 20px;
        }

        .config-features li {
            padding: 5px 0;
            color: #555;
        }

        .config-features li::before {
            content: '‚úì';
            color: #28a745;
            font-weight: bold;
            margin-right: 10px;
        }

        .config-button {
            width: 100%;
            padding: 12px 20px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .config-button:hover {
            background: linear-gradient(45deg, #5a6fd8, #6a4190);
            transform: translateY(-2px);
        }

        .demo-container {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            min-height: 600px;
        }

        .demo-header {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .demo-title {
            font-size: 1.2rem;
            font-weight: bold;
        }

        .back-button {
            padding: 8px 16px;
            background: rgba(255,255,255,0.2);
            color: white;
            border: 1px solid rgba(255,255,255,0.3);
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .back-button:hover {
            background: rgba(255,255,255,0.3);
        }

        .demo-iframe {
            width: 100%;
            height: 600px;
            border: none;
        }

        .hidden {
            display: none;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 2rem;
            }
            
            .config-grid {
                grid-template-columns: 1fr;
            }
            
            .container {
                padding: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Seletor de Configura√ß√µes -->
        <div id="selector" class="selector-view">
            <div class="header">
                <h1>üéÆ Sistema de Gamifica√ß√£o</h1>
                <p>Escolha uma configura√ß√£o para testar o sistema de aprendizado progressivo</p>
            </div>

            <div class="config-grid">
                <div class="config-card" onclick="loadDemo('teste')">
                    <div class="config-title">üß™ Configura√ß√£o de Teste</div>
                    <div class="config-description">
                        Configura√ß√£o m√≠nima para testes r√°pidos e desenvolvimento
                    </div>
                    <ul class="config-features">
                        <li>2 m√≥dulos de conte√∫do</li>
                        <li>1 checkpoint central</li>
                        <li>Layout simples</li>
                        <li>Ideal para testes</li>
                    </ul>
                    <button class="config-button">Carregar Teste</button>
                </div>

                <div class="config-card" onclick="loadDemo('simples')">
                    <div class="config-title">üöÄ Configura√ß√£o Simples</div>
                    <div class="config-description">
                        Configura√ß√£o b√°sica com poucos m√≥dulos para demonstra√ß√£o
                    </div>
                    <ul class="config-features">
                        <li>4 m√≥dulos de conte√∫do</li>
                        <li>Progress√£o linear</li>
                        <li>Interface limpa</li>
                        <li>F√°cil navega√ß√£o</li>
                    </ul>
                    <button class="config-button">Carregar Simples</button>
                </div>

                <div class="config-card" onclick="loadDemo('completa')">
                    <div class="config-title">üìö Configura√ß√£o Completa</div>
                    <div class="config-description">
                        Curso completo de dire√ß√£o com todos os m√≥dulos e depend√™ncias
                    </div>
                    <ul class="config-features">
                        <li>11 m√≥dulos completos</li>
                        <li>Sistema de depend√™ncias</li>
                        <li>M√∫ltiplos checkpoints</li>
                        <li>Experi√™ncia completa</li>
                    </ul>
                    <button class="config-button">Carregar Completa</button>
                </div>
            </div>
        </div>

        <!-- Visualizador da Demo -->
        <div id="demo" class="demo-view hidden">
            <div class="demo-container">
                <div class="demo-header">
                    <div class="demo-title" id="demoTitle">Sistema de Gamifica√ß√£o</div>
                    <button class="back-button" onclick="showSelector()">‚Üê Voltar ao Seletor</button>
                </div>
                <iframe id="demoFrame" class="demo-iframe" src="about:blank"></iframe>
            </div>
        </div>
    </div>

    <script>
        // Configura√ß√µes embutidas no JavaScript para evitar problemas de CORS
        const configs = {
            teste: {
                title: "Configura√ß√£o de Teste",
                modules: {
                    "centro": {
                        title: "üéØ Centro",
                        description: "Ponto central do sistema",
                        content: "Este √© o centro do seu aprendizado",
                        type: "checkpoint",
                        position: { x: 50, y: 50 },
                        isAvailable: true,
                        isCompleted: false
                    },
                    "modulo1": {
                        title: "üìö M√≥dulo 1",
                        description: "Primeiro m√≥dulo",
                        content: "Conte√∫do do primeiro m√≥dulo",
                        type: "content",
                        position: { x: 20, y: 30 },
                        isAvailable: true,
                        isCompleted: false,
                        dependencies: ["centro"]
                    },
                    "modulo2": {
                        title: "üìñ M√≥dulo 2", 
                        description: "Segundo m√≥dulo",
                        content: "Conte√∫do do segundo m√≥dulo",
                        type: "content",
                        position: { x: 80, y: 70 },
                        isAvailable: false,
                        isCompleted: false,
                        dependencies: ["modulo1"]
                    }
                },
                connections: [
                    { from: "centro", to: "modulo1" },
                    { from: "modulo1", to: "modulo2" }
                ],
                settings: {
                    theme: "default",
                    autoSave: true
                }
            },

            simples: {
                title: "Configura√ß√£o Simples",
                modules: {
                    "centro": {
                        title: "üéØ Centro de Aprendizado",
                        description: "Seu ponto de partida",
                        content: "Bem-vindo ao sistema de aprendizado!",
                        type: "checkpoint",
                        position: { x: 50, y: 50 },
                        isAvailable: true,
                        isCompleted: false
                    },
                    "introducao": {
                        title: "üìñ Introdu√ß√£o",
                        description: "Conceitos b√°sicos",
                        content: "Aprenda os fundamentos essenciais",
                        type: "content",
                        position: { x: 25, y: 25 },
                        isAvailable: true,
                        isCompleted: false,
                        dependencies: ["centro"]
                    },
                    "pratica": {
                        title: "‚ö° Pr√°tica",
                        description: "Exerc√≠cios pr√°ticos",
                        content: "Coloque em pr√°tica o que aprendeu",
                        type: "content",
                        position: { x: 75, y: 25 },
                        isAvailable: false,
                        isCompleted: false,
                        dependencies: ["introducao"]
                    },
                    "avancado": {
                        title: "üöÄ Avan√ßado",
                        description: "Conceitos avan√ßados",
                        content: "T√≥picos mais complexos e especializados",
                        type: "content",
                        position: { x: 50, y: 75 },
                        isAvailable: false,
                        isCompleted: false,
                        dependencies: ["pratica"]
                    }
                },
                connections: [
                    { from: "centro", to: "introducao" },
                    { from: "introducao", to: "pratica" },
                    { from: "pratica", to: "avancado" }
                ],
                settings: {
                    theme: "simple",
                    autoSave: true
                }
            },

            completa: {
                title: "Curso Completo de Dire√ß√£o",
                modules: {
                    "centro": {
                        title: "üéØ Centro de Aprendizado",
                        description: "In√≠cio da sua jornada na dire√ß√£o",
                        content: "Bem-vindo ao curso completo de dire√ß√£o! Aqui voc√™ aprender√° tudo sobre condu√ß√£o segura.",
                        type: "checkpoint",
                        position: { x: 50, y: 50 },
                        isAvailable: true,
                        isCompleted: false
                    },
                    "legislacao": {
                        title: "üìö Legisla√ß√£o de Tr√¢nsito",
                        description: "C√≥digo de Tr√¢nsito Brasileiro",
                        content: "Aprenda as leis e regulamenta√ß√µes do tr√¢nsito brasileiro",
                        type: "content",
                        position: { x: 30, y: 20 },
                        isAvailable: true,
                        isCompleted: false,
                        dependencies: ["centro"]
                    },
                    "sinalizacao": {
                        title: "üö¶ Sinaliza√ß√£o",
                        description: "Placas e sinais de tr√¢nsito",
                        content: "Entenda todos os tipos de sinaliza√ß√£o vi√°ria",
                        type: "content",
                        position: { x: 70, y: 20 },
                        isAvailable: true,
                        isCompleted: false,
                        dependencies: ["centro"]
                    },
                    "veiculo": {
                        title: "üöó Conhecendo o Ve√≠culo",
                        description: "Partes e funcionamento",
                        content: "Aprenda sobre as partes do ve√≠culo e seu funcionamento",
                        type: "content",
                        position: { x: 20, y: 35 },
                        isAvailable: false,
                        isCompleted: false,
                        dependencies: ["legislacao"]
                    },
                    "direcao-defensiva": {
                        title: "üõ°Ô∏è Dire√ß√£o Defensiva",
                        description: "T√©cnicas de condu√ß√£o segura",
                        content: "Aprenda t√©cnicas para dirigir com seguran√ßa",
                        type: "content",
                        position: { x: 80, y: 35 },
                        isAvailable: false,
                        isCompleted: false,
                        dependencies: ["sinalizacao"]
                    },
                    "primeiros-socorros": {
                        title: "üè• Primeiros Socorros",
                        description: "Atendimento de emerg√™ncia",
                        content: "Aprenda procedimentos b√°sicos de primeiros socorros",
                        type: "content",
                        position: { x: 15, y: 65 },
                        isAvailable: false,
                        isCompleted: false,
                        dependencies: ["veiculo"]
                    },
                    "meio-ambiente": {
                        title: "üå± Meio Ambiente",
                        description: "Dire√ß√£o ecol√≥gica",
                        content: "Como dirigir respeitando o meio ambiente",
                        type: "content",
                        position: { x: 85, y: 65 },
                        isAvailable: false,
                        isCompleted: false,
                        dependencies: ["direcao-defensiva"]
                    },
                    "pratica-1": {
                        title: "üéÆ Pr√°tica 1",
                        description: "Primeira aula pr√°tica",
                        content: "Sua primeira experi√™ncia ao volante",
                        type: "content",
                        position: { x: 35, y: 80 },
                        isAvailable: false,
                        isCompleted: false,
                        dependencies: ["primeiros-socorros", "meio-ambiente"]
                    },
                    "pratica-2": {
                        title: "üöô Pr√°tica 2",
                        description: "Aula pr√°tica avan√ßada",
                        content: "Manobras e situa√ß√µes mais complexas",
                        type: "content",
                        position: { x: 65, y: 80 },
                        isAvailable: false,
                        isCompleted: false,
                        dependencies: ["pratica-1"]
                    },
                    "simulado": {
                        title: "üìù Simulado",
                        description: "Teste seus conhecimentos",
                        content: "Simulado do exame te√≥rico do DETRAN",
                        type: "content",
                        position: { x: 40, y: 95 },
                        isAvailable: false,
                        isCompleted: false,
                        dependencies: ["pratica-2"]
                    },
                    "exame": {
                        title: "üèÜ Exame Final",
                        description: "Prova final do curso",
                        content: "Demonstre tudo que aprendeu!",
                        type: "content",
                        position: { x: 60, y: 95 },
                        isAvailable: false,
                        isCompleted: false,
                        dependencies: ["simulado"]
                    }
                },
                connections: [
                    { from: "centro", to: "legislacao" },
                    { from: "centro", to: "sinalizacao" },
                    { from: "legislacao", to: "veiculo" },
                    { from: "sinalizacao", to: "direcao-defensiva" },
                    { from: "veiculo", to: "primeiros-socorros" },
                    { from: "direcao-defensiva", to: "meio-ambiente" },
                    { from: "primeiros-socorros", to: "pratica-1" },
                    { from: "meio-ambiente", to: "pratica-1" },
                    { from: "pratica-1", to: "pratica-2" },
                    { from: "pratica-2", to: "simulado" },
                    { from: "pratica-2", to: "exame" },
                    { from: "simulado", to: "exame" }
                ],
                settings: {
                    theme: "complete",
                    autoSave: true,
                    showProgress: true
                }
            }
        };

        function loadDemo(configType) {
            const config = configs[configType];
            if (!config) {
                alert('Configura√ß√£o n√£o encontrada!');
                return;
            }

            // Atualiza o t√≠tulo
            document.getElementById('demoTitle').textContent = config.title;

            // Primeiro carrega a p√°gina
            document.getElementById('demoFrame').src = 'demo-embutido.html';

            // Aguarda o iframe carregar e ent√£o envia a configura√ß√£o
            document.getElementById('demoFrame').onload = function() {
                setTimeout(() => {
                    try {
                        // Envia configura√ß√£o via postMessage
                        document.getElementById('demoFrame').contentWindow.postMessage({
                            type: 'loadConfig',
                            config: config
                        }, '*');
                    } catch (error) {
                        console.error('Erro ao enviar configura√ß√£o:', error);
                    }
                }, 100);
            };

            // Mostra a demo
            document.getElementById('selector').classList.add('hidden');
            document.getElementById('demo').classList.remove('hidden');
        }

        function showSelector() {
            document.getElementById('demo').classList.add('hidden');
            document.getElementById('selector').classList.remove('hidden');
            document.getElementById('demoFrame').src = 'about:blank';
        }

        // Permite usar as setas do teclado para navegar
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                showSelector();
            }
        });
    </script>
</body>
</html>
